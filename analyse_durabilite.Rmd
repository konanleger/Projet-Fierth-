---
title: "Analyse de la Durabilité dans le Secteur du Thé"
author: "KOUASSI KONAN LEGER"
date: "`r Sys.Date()`"
output:
  html_document:
    toc: true
    toc_float: true
    theme: united
    highlight: tango
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE, warning = FALSE, message = FALSE)

# Chargement des packages nécessaires
library(readxl)
library(tidyverse)
library(lubridate)
library(scales)
library(tm)
library(wordcloud)
library(tidytext)

# Importation des données
gnpd <- read_excel("GNPD_tea.xlsx")

# Création d'un dictionnaire de labels et certifications durables
labels_durables <- c(
  "organic", "bio", "fair trade", "fairtrade", "rainforest alliance",
  "utz", "ethical", "sustainable", "eco-friendly", "green",
  "certified", "certification", "label", "agriculture biologique",
  "commerce équitable", "durable", "responsable"
)

# Fonction pour détecter les labels dans les claims
detect_labels <- function(text) {
  if(is.na(text)) return(NA)
  text <- tolower(text)
  any(sapply(labels_durables, function(label) grepl(label, text)))
}

# Ajout d'une colonne pour les produits labellisés
gnpd <- gnpd %>%
  mutate(
    has_label = sapply(`Positioning Claims`, detect_labels),
    year = year(`Date Published`),
    price_per_100 = as.numeric(`Price per 100 g/ml in Euros`)
  )
```

# Introduction

Ce document présente une analyse approfondie de la durabilité dans le secteur du thé. L'objectif est d'identifier et d'analyser les tendances en matière de labels et certifications durables, ainsi que leur impact sur le marché.

## Objectifs de l'analyse

1. Comprendre l'évolution des labels durables dans le temps
2. Analyser la relation entre les labels et les prix
3. Identifier les marchés les plus engagés en matière de durabilité
4. Examiner les différences entre les sous-catégories de thé

# Méthodologie

## Données utilisées

L'analyse est basée sur la base de données GNPD (Global New Products Database) pour le secteur du thé. Les données incluent :
- Les claims de positionnement des produits
- Les prix
- Les marchés
- Les sous-catégories
- Les dates de publication

## Dictionnaire de labels durables

Le dictionnaire de labels durables est structuré en 5 catégories principales :

1. **Certifications officielles**
   - Labels bio/organiques
   - Commerce équitable
   - Autres certifications reconnues

2. **Environnement et biodiversité**
   - Termes liés à la durabilité environnementale
   - Protection de la biodiversité
   - Gestion des ressources

3. **Social et éthique**
   - Aspects sociaux
   - Conditions de travail
   - Impact communautaire

4. **Agriculture durable**
   - Pratiques agricoles durables
   - Gestion des sols et de l'eau
   - Protection des écosystèmes

5. **Emballage et transport**
   - Solutions d'emballage durables
   - Circuits courts
   - Réduction des déchets

# Résultats

## 1. Évolution temporelle des labels

```{r evolution, echo=FALSE}
# 1. Évolution des labels dans le temps
evolution_labels <- gnpd %>%
  group_by(year) %>%
  summarise(
    total_products = n(),
    labeled_products = sum(has_label, na.rm = TRUE),
    percentage_labeled = labeled_products / total_products * 100
  )

# Visualisation de l'évolution
ggplot(evolution_labels, aes(x = year)) +
  geom_line(aes(y = percentage_labeled), color = "darkgreen", size = 1) +
  geom_point(aes(y = percentage_labeled), color = "darkgreen", size = 2) +
  labs(
    title = "Évolution du pourcentage de produits labellisés dans le temps",
    x = "Année",
    y = "Pourcentage de produits labellisés (%)"
  ) +
  theme_minimal() +
  scale_y_continuous(labels = scales::percent_format(scale = 1))
```

Cette section montre l'évolution du pourcentage de produits labellisés au fil du temps, permettant d'identifier les tendances et les changements dans l'adoption des pratiques durables.

## 2. Analyse des prix

```{r prix, echo=FALSE}
# 2. Analyse des prix : produits labellisés vs non labellisés
prix_labels <- gnpd %>%
  filter(!is.na(price_per_100)) %>%
  group_by(has_label) %>%
  summarise(
    median_price = median(price_per_100, na.rm = TRUE),
    mean_price = mean(price_per_100, na.rm = TRUE),
    n = n()
  )

# Visualisation de la distribution des prix
ggplot(gnpd %>% filter(!is.na(price_per_100)), 
       aes(x = price_per_100, fill = has_label)) +
  geom_density(alpha = 0.5) +
  labs(
    title = "Distribution des prix : produits labellisés vs non labellisés",
    x = "Prix par 100g/ml (€)",
    y = "Densité"
  ) +
  theme_minimal() +
  scale_fill_manual(
    values = c("TRUE" = "darkgreen", "FALSE" = "gray"),
    labels = c("TRUE" = "Labellisé", "FALSE" = "Non labellisé")
  )
```

L'analyse des prix compare les produits labellisés et non labellisés, révélant les différences de prix et les éventuelles primes de prix associées aux labels durables.

## 3. Analyse par marché

```{r marche, echo=FALSE}
# 3. Analyse des labels par marché
labels_par_marche <- gnpd %>%
  group_by(Market) %>%
  summarise(
    total_products = n(),
    labeled_products = sum(has_label, na.rm = TRUE),
    percentage_labeled = labeled_products / total_products * 100
  ) %>%
  filter(total_products >= 50) %>%  # Filtrer les marchés avec suffisamment de produits
  arrange(desc(percentage_labeled))

# Visualisation des marchés les plus engagés
ggplot(labels_par_marche %>% head(10), 
       aes(x = reorder(Market, percentage_labeled), y = percentage_labeled)) +
  geom_col(fill = "darkgreen") +
  coord_flip() +
  labs(
    title = "Top 10 des marchés par pourcentage de produits labellisés",
    x = "Marché",
    y = "Pourcentage de produits labellisés (%)"
  ) +
  theme_minimal() +
  scale_y_continuous(labels = scales::percent_format(scale = 1))
```

Cette section identifie les marchés les plus engagés en matière de durabilité, en se concentrant sur les marchés avec un nombre significatif de produits.

## 4. Analyse par sous-catégorie

```{r categorie, echo=FALSE}
# 4. Analyse des labels par sous-catégorie
labels_par_categorie <- gnpd %>%
  group_by(`Sub-Category`) %>%
  summarise(
    total_products = n(),
    labeled_products = sum(has_label, na.rm = TRUE),
    percentage_labeled = labeled_products / total_products * 100
  ) %>%
  filter(total_products >= 30) %>%  # Filtrer les catégories avec suffisamment de produits
  arrange(desc(percentage_labeled))

# Visualisation des catégories les plus engagées
ggplot(labels_par_categorie %>% head(10), 
       aes(x = reorder(`Sub-Category`, percentage_labeled), y = percentage_labeled)) +
  geom_col(fill = "darkgreen") +
  coord_flip() +
  labs(
    title = "Top 10 des sous-catégories par pourcentage de produits labellisés",
    x = "Sous-catégorie",
    y = "Pourcentage de produits labellisés (%)"
  ) +
  theme_minimal() +
  scale_y_continuous(labels = scales::percent_format(scale = 1))
```

L'analyse par sous-catégorie révèle les différences d'adoption des labels durables entre les différents types de thé.

# Conclusions

## Principaux résultats

1. **Tendance à la hausse** : Augmentation constante de l'adoption des labels durables
2. **Différenciation par marché** : Certains marchés montrent un engagement plus fort
3. **Impact sur les prix** : Les produits labellisés tendent à avoir des prix plus élevés
4. **Variations par catégorie** : Certaines sous-catégories sont plus avancées en matière de durabilité

## Recommandations

1. **Pour les producteurs** :
   - Développer des stratégies de labellisation adaptées à chaque marché
   - Communiquer la valeur ajoutée des labels durables
   - Investir dans des certifications reconnues

2. **Pour les distributeurs** :
   - Mettre en avant les produits labellisés
   - Éduquer les consommateurs sur la valeur des labels
   - Développer des gammes de produits durables

3. **Pour les consommateurs** :
   - Privilégier les produits labellisés
   - Comprendre la signification des différents labels
   - Être prêt à payer une prime pour des produits durables

# Annexes

## Code source

Le code source complet de l'analyse est disponible dans le fichier `analyse_durabilite.R`.

## Références

- Global New Products Database (GNPD)
- Standards et certifications durables
- Études sur la durabilité dans le secteur du thé 